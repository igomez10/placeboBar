<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://unpkg.com/vue"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.js"></script>
</head>

<body>
  <div id=app>
    <div class="container">

      <h2>Basic Progress Bar {{message}}</h2>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" :style="{width: progValue + '%'}">
          <p v-show='progValue<100'>{{progValue}}</p>
          <span class="sr-only"></span>
        </div>
      </div>
      <button @click="complete()"></button>
    </div>
  </div>
  <script>
  var app = new Vue({
    el: '#app',
    data: {
      message: "VuejsConfirmation",
      progValue: 0,
    },
    methods: {
      complete: async function() {
        this.progValue = Math.floor(Math.random()*10);
        for(i=0; this.progValue<101 && i<100; i++){
          await this.sleep(Math.random() * 1500)
          setTimeout(
          ()=>{
           return this.progValue = Math.floor(this.progValue + Math.random()*30)
          }, 100
          );

        }
      },
      sleep: function(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
      },
      refresh: function(){
        location.reload()
      }

    },
    watch: {
      progValue: function(){
        if(this.progValue>100){
          this.refresh();
        }
      }
    }
  }
)
</script>
</body>

</html>
